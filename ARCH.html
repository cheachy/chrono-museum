<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Chrono-Museum: VR Final Project</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>

    <style>
      /* --- 1. HUD & UI STYLING --- */
      body { margin: 0; overflow: hidden; font-family: 'Courier New', monospace; }
      
      #ui-layer {
        position: fixed; top: 10%; left: -350px; width: 300px;
        background: rgba(10, 15, 20, 0.95);
        border-right: 3px solid #00FFFF;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        border-radius: 0 25px 25px 0; color: #EEE;
        padding: 30px; z-index: 1000;
        transition: left 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
      }
      #ui-layer.visible { left: 0; }

      h1 { color: #00FFFF; text-transform: uppercase; border-bottom: 1px solid #333; padding-bottom: 10px; font-size: 22px; text-align: center; margin-top: 0; }
      h3 { color: #888; font-size: 14px; text-align: center; margin-bottom: 20px; }

      .btn {
        display: block; background: linear-gradient(90deg, #111, #222);
        border: 1px solid #444; color: #FFF; padding: 12px; margin: 10px 0;
        cursor: pointer; transition: 0.2s; border-left: 4px solid #555;
      }
      .btn:hover { border-left: 4px solid #00FFFF; background: #222; padding-left: 20px; }
      
      #credits-modal {
        display: none; background: rgba(0,0,0,0.9); position: absolute;
        top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 60%; padding: 40px; border: 2px solid #00FFFF; text-align: center; color: white;
        z-index: 2000;
      }
      
      .instructions { 
        position: fixed; bottom: 20px; left: 20px; 
        color: #00FFFF; font-weight: bold; font-size: 16px; 
        text-shadow: 0 0 5px #00FFFF;
        animation: blink 2s infinite;
      }

      @keyframes blink { 0% {opacity: 1;} 50% {opacity: 0.3;} 100% {opacity: 1;} }
    </style>
  </head>
  <body>

    <div id="ui-layer">
      <h1>Chrono-Visor</h1>
      <h3>Select Time Period</h3>
      
      <div class="btn" onclick="App.startWarp('prehistory')">1. Prehistory (3000 BC)</div>
      <div class="btn" onclick="App.startWarp('classical')">2. Classical Era (500 BC)</div>
      <div class="btn" onclick="App.startWarp('middleages')">3. Middle Ages (1200 AD)</div>
      <div class="btn" onclick="App.startWarp('earlymodern')">4. Early Modern (1600 AD)</div>
      <div class="btn" onclick="App.startWarp('contemporary')">5. Contemporary (2000 AD)</div>
      
      <hr style="border: 0; border-top: 1px solid #333; margin: 20px 0;">
      <div class="btn" onclick="App.toggleCredits()">About Project / Team</div>
    </div>

    <div id="credits-modal">
      <h2 style="color:#00FFFF">PROJECT: CHRONO-MUSEUM</h2>
      <p>A Virtual Reality learning experience exploring human tool development across 5 eras.</p>
      <h3>DEVELOPMENT TEAM</h3>
      <ul style="list-style: none; padding: 0;">
        <li><strong>Lead Developer:</strong> [Your Name Here]</li>
        <li><strong>3D Artist:</strong> [Member Name]</li>
        <li><strong>Researcher:</strong> [Member Name]</li>
      </ul>
      <div class="btn" style="width: 100px; margin: 0 auto;" onclick="App.toggleCredits()">CLOSE</div>
    </div>

    <div class="instructions">PRESS 'M' TO TRAVEL TIME</div>

    <script>
      /** * --- DATA --- */
      const DB = {
        prehistory: {
          env: "preset: forest; fog: 0.7; skyType: atmosphere; groundColor: #3d2c20", 
          items: [
            { name: "Stone Axe", info: "The first lever machine used by early humans." },
            { name: "Fire Pit", info: "Marks the mastery of energy control." },
            { name: "Cave Art", info: "The birth of abstract communication." },
            { name: "Bone Needle", info: "The beginning of complex textile manufacturing." },
            { name: "Woven Basket", info: "Early logistics: transporting goods." }
          ]
        },
        classical: {
          env: "preset: egypt; skyType: gradient; lighting: distant; groundColor: #e6c288",
          items: [
            { name: "Amphora", info: "Standardized shipping container of the ancient world." },
            { name: "Legion Helmet", info: "Mass-produced armor for professional armies." },
            { name: "Papyrus", info: "Portable information storage." },
            { name: "Marble Bust", info: "Political propaganda through art." },
            { name: "Gold Coin", info: "Standardized currency enabling global trade." }
          ]
        },
        middleages: {
          env: "preset: starry; fog: 0.5; groundColor: #1a1a1a; grid: none",
          items: [
            { name: "Iron Sword", info: "High-carbon steel metallurgy." },
            { name: "Shield", info: "Heraldry: The first visual ID systems." },
            { name: "Crown", info: "Centralized authority and feudalism." },
            { name: "Cross", info: "The unifying power of organized religion." },
            { name: "Manuscript", info: "Preservation of knowledge by monastic orders." }
          ]
        },
        earlymodern: {
          env: "preset: arches; skyType: atmosphere; lighting: distant; groundColor: #8f7e6b",
          items: [
            { name: "Compass", info: "Global navigation and the Age of Discovery." },
            { name: "Printing Press", info: "Democratization of information." },
            { name: "Telescope", info: "Scientific observation challenging dogma." },
            { name: "Gunpowder", info: "The end of walled fortifications." },
            { name: "Spices", info: "Commodities that drove global colonization." }
          ]
        },
        contemporary: {
          env: "preset: tron; grid: 1x1; groundColor: #000; skyType: gradient",
          items: [
            { name: "Microchip", info: "The brain of the Information Age." },
            { name: "Rocket", info: "Expanding humanity beyond Earth." },
            { name: "Smartphone", info: "Sum of all human knowledge in your pocket." },
            { name: "Plastic", info: "Synthetic materials: Blessing and curse." },
            { name: "Robot Arm", info: "Automation and the future of labor." }
          ]
        }
      };

      /**
       * --- LOGIC ---
       */
      const App = {
        isWarping: false,

        init: function() {
          window.addEventListener('keydown', (e) => {
            if(e.key.toLowerCase() === 'm') this.toggleMenu();
          });
          this.loadEra('prehistory');
        },

        toggleMenu: function() {
          document.getElementById('ui-layer').classList.toggle('visible');
          const instructions3D = document.querySelector('#instruction-text-3d');
          if(instructions3D) instructions3D.setAttribute('visible', 'false');
        },

        toggleCredits: function() {
          const modal = document.getElementById('credits-modal');
          modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
        },

        startWarp: function(eraKey) {
          if(this.isWarping) return;
          this.isWarping = true;
          
          document.getElementById('ui-layer').classList.remove('visible');

          const tunnel = document.getElementById('warp-tunnel');
          const flash = document.getElementById('warp-flash');
          
          // 1. Show effects
          tunnel.setAttribute('visible', 'true');
          flash.setAttribute('visible', 'true');
          
          // 2. Animate to white
          flash.setAttribute('animation', 'property: material.opacity; from: 0; to: 1; dur: 1500; easing: easeInQuad');
          
          // 3. Wait, then swap
          setTimeout(() => {
            this.loadEra(eraKey); 
            
            // 4. Fade Out
            flash.setAttribute('animation', 'property: material.opacity; from: 1; to: 0; dur: 1500; easing: easeOutQuad');
            
            // 5. Hide effects and unlock clicks
            setTimeout(() => {
              tunnel.setAttribute('visible', 'false');
              flash.setAttribute('visible', 'false'); 
              this.isWarping = false;
            }, 1500);

          }, 1500);
        },

        loadEra: function(eraKey) {
          const data = DB[eraKey];
          
          document.querySelector('#env').setAttribute('environment', data.env);
          this.buildScenery(eraKey);
          document.querySelector('#wall-title').setAttribute('value', "ERA: " + eraKey.toUpperCase());
          
          for (let i = 0; i < 5; i++) {
            let label = document.querySelector('#label' + (i+1));
            let itemEntity = document.querySelector('#item' + (i+1));
            
            label.setAttribute('value', data.items[i].name);
            itemEntity.setAttribute('data-name', data.items[i].name);
            itemEntity.setAttribute('data-info', data.items[i].info);
          }
        },

        buildScenery: function(era) {
          const container = document.getElementById('custom-scenery');
          container.innerHTML = ''; 

          if(era === 'prehistory') {
            this.spawnProps(container, 'cylinder', '#3d2e1e', 10, {h:8, r:0.6}, true); 
          } else if (era === 'classical') {
            this.spawnPillars(container);
          } else if (era === 'middleages') {
            this.spawnGuards(container);
          } else if (era === 'earlymodern') {
            this.spawnHouse(container);
          } else if (era === 'contemporary') {
             this.spawnProps(container, 'box', '#111', 15, {h:15, r:2}, false, true);
          }
        },

        spawnProps: function(container, shape, color, count, size, isTree, isNeon) {
          for(let i=0; i<count; i++) {
            let el = document.createElement('a-' + shape);
            let x = (Math.random() * 30) - 15;
            let z = (Math.random() * 30) - 15;
            if(Math.abs(x) < 3 && Math.abs(z) < 3) continue; 

            el.setAttribute('position', `${x} ${size.h/2} ${z}`);
            el.setAttribute('color', color);
            el.setAttribute('height', size.h);
            el.setAttribute('radius', size.r); 
            el.setAttribute('width', size.r); 
            el.setAttribute('depth', size.r); 
            
            if(isNeon) el.setAttribute('material', 'emissive: #00FFFF; emissiveIntensity: 0.2');
            container.appendChild(el);
          }
        },

        spawnPillars: function(container) {
          for(let i=-4; i<=4; i+=2) {
            if(i==0) continue;
            let el = document.createElement('a-cylinder');
            el.setAttribute('position', `${i*2} 3 -8`);
            el.setAttribute('height', '6');
            el.setAttribute('radius', '0.5');
            el.setAttribute('color', '#EEE');
            container.appendChild(el);
          }
        },

        spawnGuards: function(container) {
          let g1 = document.createElement('a-box');
          g1.setAttribute('position', '-4 1.5 -2');
          g1.setAttribute('scale', '1 3 1');
          g1.setAttribute('color', '#555');
          container.appendChild(g1);
          let g2 = g1.cloneNode(true);
          g2.setAttribute('position', '4 1.5 -2');
          container.appendChild(g2);
        },
        
        spawnHouse: function(container) {
           let floor = document.createElement('a-circle');
           floor.setAttribute('radius', '10');
           floor.setAttribute('rotation', '-90 0 0');
           floor.setAttribute('color', '#6d5638');
           floor.setAttribute('position', '0 0.1 0');
           container.appendChild(floor);
        }
      };

      // CLICK COMPONENT
      AFRAME.registerComponent('info-click', {
        init: function () {
          this.el.addEventListener('click', function () {
            let info = this.getAttribute('data-info');
            let name = this.getAttribute('data-name');
            
            let wallTitle = document.querySelector('#wall-title');
            let wallInfo = document.querySelector('#wall-info');
            
            // Only update if elements exist
            if (wallTitle) wallTitle.setAttribute('value', name);
            if (wallInfo) wallInfo.setAttribute('value', info);
            
            // Visual bounce feedback
            this.object3D.scale.multiplyScalar(1.2);
            setTimeout(() => { this.object3D.scale.multiplyScalar(1/1.2); }, 150);
          });
        }
      });

      window.onload = function() { App.init(); };
    </script>

    <a-scene cursor="rayOrigin: mouse" raycaster="objects: [info-click]">
      
      <a-entity id="env" environment="preset: forest"></a-entity>
      <a-entity id="custom-scenery"></a-entity>

      <a-entity camera look-controls wasd-controls position="0 1.6 5">
        <a-cursor color="#00FFFF" scale="0.8 0.8 0.8"></a-cursor>
        
        <a-sphere id="warp-flash" radius="0.5" position="0 0 -0.6" visible="false"
                  material="shader: flat; color: white; opacity: 0; side: back; transparent: true">
        </a-sphere>
      </a-entity>

      <a-entity id="warp-tunnel" visible="false">
        <a-cylinder 
          position="0 1.6 0" radius="6" height="30" rotation="90 0 0" open-ended="true" side="double"
          material="shader: standard; color: #00FFFF; wireframe: true; opacity: 0.6; emissive: #00FFFF; emissiveIntensity: 0.5"
          animation="property: rotation; to: 90 0 360; loop: true; dur: 2000; easing: linear">
        </a-cylinder>
      </a-entity>

      <a-text id="instruction-text-3d" 
              value="PRESS 'M' TO TRAVEL TIME" 
              align="center" 
              position="0 2.5 -2" 
              scale="1.2 1.2 1.2"
              color="#00FFFF"
              animation="property: opacity; from: 1; to: 0.2; dir: alternate; loop: true; dur: 800">
      </a-text>

      <a-entity position="0 2.5 -5">
        <a-text value="Interactive History" align="center" position="0 2 0" color="#BBB" scale="0.8 0.8 0.8"></a-text>
        <a-plane color="#050505" width="6" height="3.5" opacity="0.9" side="double"
                 material="shader: standard; emissive: #00FFFF; emissiveIntensity: 0.1; border: 1px solid white">
          <a-text id="wall-title" value="LOADING..." align="center" position="0 1 0.1" scale="1.8 1.8 1.8" color="#00FFFF"></a-text>
          <a-text id="wall-info" value="Select an artifact to learn more." align="center" width="4.5" position="0 0 0.1" color="#FFF"></a-text>
        </a-plane>
      </a-entity>

      <a-entity position="-4 0 -3" rotation="0 30 0">
        <a-cylinder color="#111" height="1" radius="0.4" material="metalness:0.5"></a-cylinder>
        <a-box id="item1" info-click position="0 1 0" scale="0.5 0.5 0.5" color="#777" animation="property: rotation; to: 0 360 0; loop: true; dur: 8000"></a-box>
        <a-text id="label1" value="..." align="center" position="0 1.6 0" scale="0.7 0.7 0.7"></a-text>
      </a-entity>

      <a-entity position="-2 0 -2.5" rotation="0 15 0">
        <a-cylinder color="#111" height="1" radius="0.4" material="metalness:0.5"></a-cylinder>
        <a-sphere id="item2" info-click position="0 1 0" scale="0.3 0.3 0.3" color="#777" animation="property: position; to: 0 1.2 0; loop: true; dir: alternate"></a-sphere>
        <a-text id="label2" value="..." align="center" position="0 1.6 0" scale="0.7 0.7 0.7"></a-text>
      </a-entity>

      <a-entity position="0 0 -2">
        <a-cylinder color="#111" height="1" radius="0.4" material="metalness:0.5"></a-cylinder>
        <a-dodecahedron id="item3" info-click position="0 1 0" scale="0.4 0.4 0.4" color="#777" animation="property: rotation; to: 360 360 0; loop: true; dur: 10000"></a-dodecahedron>
        <a-text id="label3" value="..." align="center" position="0 1.6 0" scale="0.7 0.7 0.7"></a-text>
      </a-entity>

      <a-entity position="2 0 -2.5" rotation="0 -15 0">
        <a-cylinder color="#111" height="1" radius="0.4" material="metalness:0.5"></a-cylinder>
        <a-sphere id="item4" info-click position="0 1 0" scale="0.3 0.3 0.3" color="#777" animation="property: position; to: 0 1.2 0; loop: true; dir: alternate"></a-sphere>
        <a-text id="label4" value="..." align="center" position="0 1.6 0" scale="0.7 0.7 0.7"></a-text>
      </a-entity>

      <a-entity position="4 0 -3" rotation="0 -30 0">
        <a-cylinder color="#111" height="1" radius="0.4" material="metalness:0.5"></a-cylinder>
        <a-box id="item5" info-click position="0 1 0" scale="0.5 0.5 0.5" color="#777" animation="property: rotation; to: 0 360 0; loop: true; dur: 8000"></a-box>
        <a-text id="label5" value="..." align="center" position="0 1.6 0" scale="0.7 0.7 0.7"></a-text>
      </a-entity>

    </a-scene>
  </body>
</html>